!function(){"use strict";function p(t,e,n,l){l={data:l||(e?e.data:{}),_wrap:e?e._wrap:null,tmpl:null,parent:e||null,nodes:[],calls:a,nest:c,wrap:d,html:f,update:m};return t&&h.extend(l,t,{nodes:[],parent:e}),n&&(l.tmpl=n,l._ctnt=l._ctnt||l.tmpl(h,l),l.key=++T,(j.length?w:v)[T]=l),l}function i(e,t,n){var a,n=n?h.map(n,function(t){return"string"==typeof t?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+_+'="'+e.key+'" $2'):t:i(t,e,t._ctnt)}):e;return t?n:((n=n.join("")).replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,e,n,l){u(a=h(n).get()),e&&(a=r(e).concat(a)),l&&(a=a.concat(r(l)))}),a||r(n))}function r(t){var e=document.createElement("div");return e.innerHTML=t,h.makeArray(e.childNodes)}function n(t){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+h.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,e,n,l,a,i,r){var o,u,p=h.tmpl.tag[n];if(p)return o=p._default||[],i&&!/\w$/.test(a)&&(a+=i,i=""),r=a?(a=s(a),r=r?","+s(r)+")":i?")":"",u=i?-1<a.indexOf(".")?a+s(i):"("+a+").call($item"+r:a,i?u:"(typeof("+a+")==='function'?("+a+").call($item):("+a+"))"):u=o.$1||"null",l=s(l),"');"+p[e?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(r).split("$1").join(u).split("$2").join(l?l.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(t,e,n,l){return(l=l?","+l+")":n?")":"")?"("+e+").call($item"+l:t}):o.$2||"")+"_.push('";throw"Template command not found: "+n})+"');}return _;")}function o(t,e){t._wrap=i(t,!0,h.isArray(e)?e:[l.test(e)?e:h(e).html()]).join("")}function s(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function u(t){for(var e,n,l,o="_"+C,u={},a=0,i=t.length;a<i;a++)if(1===(e=t[a]).nodeType){for(l=(n=e.getElementsByTagName("*")).length-1;0<=l;l--)r(n[l]);r(e)}function r(t){var e,n,l,a,i=t;if(a=t.getAttribute(_)){for(;i.parentNode&&1===(i=i.parentNode).nodeType&&!(e=i.getAttribute(_)););e!==a&&(i=i.parentNode&&11!==i.nodeType&&i.getAttribute(_)||0,(l=v[a])||((l=p(l=w[a],v[i]||w[i])).key=++T,v[T]=l),C)&&r(a),t.removeAttribute(_)}else C&&(l=h.data(t,"tmplItem"))&&(r(l.key),v[l.key]=l,i=(i=h.data(t.parentNode,"tmplItem"))?i.key:0);if(l){for(n=l;n&&n.key!=i;)n.nodes.push(t),n=n.parent;delete l._ctnt,delete l._wrap,h.data(t,"tmplItem",l)}function r(t){l=u[t+=o]=u[t]||p(l,v[l.parent.key+o]||l.parent)}}}function a(t,e,n,l){if(!t)return j.pop();j.push({_:t,tmpl:e,item:this,data:n,options:l})}function c(t,e,n){return h.tmpl(h.template(t),e,n,this)}function d(t,e){var n=t.options||{};return n.wrapped=e,h.tmpl(h.template(t.tmpl),t.data,n,t.item)}function f(t,n){var e=this._wrap;return h.map(h(h.isArray(e)?e.join(""):e).filter(t||"*"),function(t){return n?t.innerText||t.textContent:t.outerHTML||(t=t,(e=document.createElement("div")).appendChild(t.cloneNode(!0)),e.innerHTML);var e})}function m(){var t=this.nodes;h.tmpl(null,null,null,this).insertBefore(t[0]),h(t).remove()}var h,g,y,_,l,v,w,k,T,C,j,b;h=jQuery,y=h.fn.domManip,_="_tmplitem",l=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,v={},w={},k={key:0,data:{}},C=T=0,j=[],h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(r,o){h.fn[r]=function(t){var e,n,l,a=[],i=h(t),t=1===this.length&&this[0].parentNode;if(g=v||{},t&&11===t.nodeType&&1===t.childNodes.length&&1===i.length)i[o](this[0]),a=this;else{for(n=0,l=i.length;n<l;n++)e=(0<(C=n)?this.clone(!0):this).get(),h(i[n])[o](e),a=a.concat(e);C=0,a=this.pushStack(a,r,i.selector)}return t=g,g=null,h.tmpl.complete(t),a}}),h.fn.extend({tmpl:function(t,e,n){return h.tmpl(this[0],t,e,n)},tmplItem:function(){return h.tmplItem(this[0])},template:function(t){return h.template(t,this[0])},domManip:function(t,e,n){if(t[0]&&h.isArray(t[0])){for(var l,a=h.makeArray(arguments),i=t[0],r=i.length,o=0;o<r&&!(l=h.data(i[o++],"tmplItem")););l&&C&&(a[2]=function(t){h.tmpl.afterManip(this,t,n)}),y.apply(this,a)}else y.apply(this,arguments);return C=0,g||h.tmpl.complete(v),this}}),h.extend({tmpl:function(e,t,n,l){var a=!l;if(a)l=k,e=h.template[e]||h.template(null,e),w={};else if(!e)return e=l.tmpl,(v[l.key]=l).nodes=[],l.wrapped&&o(l,l.wrapped),h(i(l,null,l.tmpl(h,l)));return e?("function"==typeof t&&(t=t.call(l||{})),n&&n.wrapped&&o(n,n.wrapped),t=h.isArray(t)?h.map(t,function(t){return t?p(n,l,e,t):null}):[p(n,l,e,t)],a?h(i(l,null,t)):t):[]},tmplItem:function(t){var e;for(t instanceof h&&(t=t[0]);t&&1===t.nodeType&&!(e=h.data(t,"tmplItem"))&&(t=t.parentNode););return e||k},template:function(t,e){return e?("string"==typeof e?e=n(e):e instanceof h&&(e=e[0]||{}),e.nodeType&&(e=h.data(e,"tmpl")||h.data(e,"tmpl",n(e.innerHTML))),"string"==typeof t?h.template[t]=e:e):t?"string"!=typeof t?h.template(null,t):h.template[t]||h.template(null,l.test(t)?t:h(t)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),h.extend(h.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){v={}},afterManip:function(t,e,n){var l=11===e.nodeType?h.makeArray(e.childNodes):1===e.nodeType?[e]:[];n.call(t,e),u(l),C++}}),(b=jQuery).fn.iSuggest=function(t){var n,l,a=b(this),i=b("<div id='search_suggest'><ul></ul></div>"),r=b.extend({},{api:"",delay_ms:800,tmplId:"suggResult",currClass:"curr_item"},t);return i.appendTo("body").hide(),a.blur(function(){setTimeout(function(){i.hide()},300)}),b(window).load(o).resize(o),a.each(function(){a.attr("autocomplete","off"),a.keyup(function(t){var e=t;if(n&&n.abort(),/27$|38$|40$/.test(e.keyCode)&&i.is(":visible"))switch(e.preventDefault(),e.keyCode){case 38:u("up");break;case 40:u("down");break;case 27:i.hide()}else if(/13$/.test(e.keyCode)&&i.find("."+r.currClass).length)e.preventDefault(),p(i.find("."+r.currClass));else{try{clearTimeout(l),l=null}catch(e){}l=setTimeout(function(){var e,t=b.trim(a.val());(e=t).length?n=b.get(r.api,{q:e},function(t){var n;t.length?(b("#search_suggest ul").empty(),n=e,(t=t).length&&(b.each(t,function(t,e){e.keyword=n,e.index=t}),b("#search_suggest ul").html(b("#"+r.tmplId).tmpl(t)),o(),i.show(),b("#search_suggest ul").delegate("li","click",function(){p(this)}))):i.hide()}):i.hide()},r.delay_ms)}}).keydown(function(t){/27$|38$|40$/.test(t.keyCode)&&i.is(":visible")&&t.preventDefault()})});function o(){var t=a.offset(),e=a.outerHeight(!1);i.css({top:t.top+e+"px",left:t.left+"px"})}function u(t){var e=i.find("."+r.currClass);e.length?(e.removeClass(r.currClass),"up"==t?(e.prev("li").length?e.prev("li"):i.find("li:last")).addClass(r.currClass):"down"==t&&(e.next("li").length?e.next("li"):i.find("li:first")).addClass(r.currClass)):"up"==t?i.find("li:last").addClass(r.currClass):"down"==t&&i.find("li:first").addClass(r.currClass)}function p(t){b.isFunction(r.item_act)?r.item_act(t):console.error("iSuggest: call back is not a function")}},$("#db-nav-music").find("input[name=search_text]").iSuggest({api:"https://music.douban.com/j/subject_suggest",tmplId:"suggResult",item_act:function(t){window.location=t.data("link")}})}();
