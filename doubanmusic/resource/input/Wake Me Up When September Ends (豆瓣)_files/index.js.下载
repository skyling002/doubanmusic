(()=>{(()=>{"use strict";var u={};u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var j={};const v=React;var i=u.n(v);const A=ReactDOM,B=window.React&&React.PropTypes,D="https://www.douban.com";let p="https://m.douban.com";location.href.indexOf("localhost")>-1&&(p="");const b=p+"/rexxar/api/v2/${type}/${id}/verify_users",F=p+"/rexxar/api/v2/${type}/${id}/verify_user_infos",I="https://www.douban.com/login",R=f("ck"),h=Object.assign({},window.answerObj),T={book:"\u672C\u4E66",movie:"\u672C\u7247",tv:"\u672C\u5267",music:"\u5531\u7247",podcast:"\u64AD\u5BA2"};function g(e){e.stopPropagation(),e.preventDefault()}function x(e){e.data=e.data||{},e.withCk!==!1&&(e.data.ck=f("ck")),e.error=e.error||(t=>console.log(t)),e.ajaxError=e.ajaxError||(t=>console.log("\u65E0\u7F51\u7EDC\u8FDE\u63A5\uFF0C \u8BF7\u7A0D\u540E\u518D\u8BD5")),$.ajax($.extend({type:e.type||"GET",url:e.url,data:e.data,dataType:e.dataType||"json",timeout:e.timeout,xhrFields:{withCredentials:!0},success:function(t){t.error?e.error?e.error(t.error,t.data,t):console.log(t.error):e.success&&e.success(t)},error:function(t){if(t.status===0)e.ajaxError&&e.ajaxError();else if(t.status===400)e.accessError&&e.accessError();else{const r=$.parseJSON(t.responseText);e.error&&e.error(r.localized_message,r)}},complete:function(t){e.complete&&e.complete()}},e.extra))}function E(e){const t={},r=l=>e[l]instanceof Function&&!l.match(/^component|^render$|^constructor$/);let a=[...Object.keys(e).filter(r)],s=e;for(;s=Object.getPrototypeOf(s);){const l=Object.getOwnPropertyNames(s);if(l.indexOf("setState")>=0)break;a=a.concat(l.filter(r))}return a.forEach(l=>{t[l]=e[l],e[l]=e[l].bind(e)}),t}function P(e,t=r=>r.id){const r={ids:null,entities:{}};return r.ids=e.map(a=>{let s=t(a);return r.entities[s]=a,s}),r}function k(e){for(var t=location.search.substring(1),r=t.split("&"),a,s,l,n=0,c=r.length;n<c;n++)if(a=r[n].indexOf("="),a!=-1&&(s=r[n].substring(0,a),l=r[n].substring(a+1),e===s))return decodeURIComponent(l);return""}function f(e){var t=e+"=",r=document.cookie.split(";"),a,s;for(a=0;a<r.length;a++){for(s=r[a];s.charAt(0)==" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length).replace(/\"/g,"")}return null}const{TYPE:M,USER_ID:y=""}=h,w={4:"/pics/ic_verify@2x.png",5:"https://img3.doubanio.com/view/treasury_image/raw/public/6d149fb3e28a422.jpg"};class C extends React.Component{constructor(t){super(t),this.state={isFollowed:t.author&&t.author.followed},E(this)}render(){let{isFollowed:t}=this.state,{author:r={},verify_roles:a}=this.props,{id:s,name:l,avatar:n,url:c,followers_count:m,verify_type:o}=r,_=`url(${w[o]||""}), url(${n})`,d=null;return t?d=React.createElement("span",{className:"followed"},"\u5DF2\u5173\u6CE8"):d=React.createElement("a",{href:c,className:"a-btn-add"+(R?"":" j a_show_login")},"\u53BB\u5173\u6CE8"),React.createElement("div",{className:"author-info"},y===s?null:React.createElement("div",{className:"rr"},r.in_blacklist?null:d),React.createElement("a",{className:"author-link",href:c,target:"_blank",title:l},React.createElement("div",{className:"avatar "+(o?"verify-avatar":""),title:l,style:{backgroundImage:_}}),React.createElement("div",{className:"info"},React.createElement("span",{className:"name"}," ",l," "),React.createElement("span",{className:"verify"},a||""," / ",m," \u4EBA\u5173\u6CE8"))))}}class N extends React.Component{constructor(t){super(t)}render(){let{tabType:t,items:r,classname:a}=this.props,s=r[0];return React.createElement("div",{className:"comment "+a},React.createElement("div",{className:"comment-title"},React.createElement("a",{className:"nowrap",href:s.url},s.title)),React.createElement("div",{className:"comment-content"},s.abstract))}}class O extends React.Component{constructor(t){super(t),this.state={},E(this)}renderAuthorDesc(){let{verify_user:t}=this.props;if(!t)return null;let{articles:r,article_count:a}=t;return React.createElement("div",{className:"author-desc"},React.createElement("div",{className:"author-tabs"},React.createElement("span",null,"\u4F5C\u8005\u81EA\u8FF0 ",a>0?a:"")),React.createElement("div",{className:"author-tabcon"},React.createElement(N,{items:t.articles,count:a,classname:"on"})))}render(){let{verify_user:t}=this.props,{user:r,verify_roles:a,article_count:s}=t;return t?React.createElement("div",{className:"author-item"},React.createElement(C,{author:r,verify_roles:a}),s>0?this.renderAuthorDesc():null,s>1?React.createElement("div",{className:"more"},"> ",React.createElement("a",{href:"/subject/"+h.SUBJECT_ID+"/readme?user_id="+r.id},"\u66F4\u591A\u81EA\u8FF0",s,"\u7BC7")):null):null}}(function(){const{TYPE:e,SUBJECT_ID:t,ISALL:r=!1}=h;class a extends i().Component{constructor(l){super(l),this.state={start:0,count:2,total:0,verify_users:[]},E(this)}componentDidMount(){this.getCreators()}getCreators(){let{start:l,count:n}=this.state,c={start:l,count:n};const m=b.replace("${type}",e).replace("${id}",t);x({url:m,type:"GET",data:c,success:o=>{this.setState({verify_users:o.verify_users,total:o.total})},error:o=>{console.log("xxx")}})}render(){let{verify_users:l,total:n}=this.state,c=typeof r=="boolean"?r:r.toLowerCase()==="true",m=c?l:n>2?l.slice(0,2):l,o=()=>c?null:n>0?i().createElement("h2",null,"\u521B\u4F5C\u8005\u5728\u8C46\u74E3 \xB7 \xB7 \xB7 \xB7 \xB7 \xB7",i().createElement("span",{className:"pl"},"( ",i().createElement("a",{href:`/${["podcast"].includes(e)?e:"subject"}/${t}/creators`},"\u5168\u90E8 ",n)," )")):null;return i().createElement("div",{className:"author-subject"},o(),m.map((_,d)=>i().createElement(O,{verify_user:_,key:d,getCreateUrl:this.getCreateUrl})))}}ReactDOM.render(i().createElement(a,null),document.getElementById("author_subject"))})()})();})();

//# sourceMappingURL=index.js.map
